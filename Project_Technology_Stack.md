# AI 寶可夢短篇小說產生器：技術堆疊說明

本文件旨在說明「AI 寶可夢短篇小說產生器」專案目前所使用的主要技術及其在專案中的應用位置與用途。

## 一、核心技術與框架

| 技術/函式庫     | 版本 (建議) | 主要使用位置/模組                                 | 用途說明                                                                 |
| :-------------- | :---------- | :------------------------------------------------ | :----------------------------------------------------------------------- |
| **Python**      | 3.10+       | 整個專案                                          | 主要程式語言。                                                             |
| **Gradio**      | 最新穩定版  | `ui/app.py`                                       | 快速搭建互動式 Web 使用者介面 (UI/Demo)。                                   |
| **OpenAI API**  | N/A         | `core/llm_services.py` (透過 `openai` Python 函式庫) | 與 OpenAI 的大型語言模型 (例如 GPT-4, GPT-3.5-turbo) 互動，執行文本生成任務。 |
| **Asyncio**     | Python 內建 | `core/cot_engine.py`, `core/llm_services.py`, `ui/app.py` | 處理非同步操作，特別是與 LLM API 的網路請求，以及 Gradio 的事件處理，避免 UI 阻塞。 |

## 二、程式碼組織與輔助

| 技術/模組                | 主要使用位置/模組        | 用途說明                                                               |
| :----------------------- | :----------------------- | :--------------------------------------------------------------------- |
| **Type Hinting (typing)** | 整個專案                 | 提供靜態類型檢查，增強程式碼可讀性、健壯性與可維護性。                         |
| **Pydantic** (隱含使用)  | `config/settings.py`     | (透過 `python-dotenv` 間接或直接) 用於環境變數的載入、驗證與類型轉換。       |
| **Prompt Templates**      | `core/prompt_templates.py` | 集中管理所有與 LLM 互動的提示模板，方便修改、版本控制及保持核心邏輯的整潔。 |
| **Custom CSS**            | `ui/app.py` (內嵌)       | 自訂 Gradio 介面的外觀與風格，以符合特定的品牌或視覺需求 (如路卡利歐配色)。   |

## 三、開發與環境管理

| 工具/技術         | 用途說明                                                                 |
| :---------------- | :----------------------------------------------------------------------- |
| **Git & GitHub**  | 版本控制與協同開發。                                                       |
| **Virtual Env (venv)** | 建立獨立的 Python 環境，管理專案依賴，避免版本衝突。                       |
| **Ruff**          | (建議) 高效能的 Python Linter 和 Formatter，取代 Black, Flake8, isort 等。     |
| **pytest**        | (建議) 用於撰寫和執行單元測試與整合測試，確保程式碼品質。                  |
| **python-dotenv** | `config/settings.py` (通常) | 從 `.env` 檔案載入環境變數 (例如 API Keys)，避免將敏感資訊硬編碼到程式碼中。 |

## 四、專案結構與設計模式

| 概念/模式                | 實踐位置/方式                                       | 用途說明                                                                 |
| :----------------------- | :-------------------------------------------------- | :----------------------------------------------------------------------- |
| **模組化設計**           | `core/`, `ui/`, `config/` 等目錄結構              | 將不同功能的程式碼組織到獨立的模組和套件中，提高可維護性和可重用性。         |
| **服務層 (Service Layer)** | `core/llm_services.py`, `core/cot_engine.py`        | 封裝與外部服務 (如 LLM API) 的互動邏輯，以及核心的業務邏輯 (思維鏈引擎)。   |
| **思維鏈 (CoT)**         | `core/cot_engine.py`, `core/prompt_templates.py`    | 指導 LLM 進行多步驟的推理和生成，以提升複雜任務 (如故事創作) 的品質和連貫性。 |
| **設定管理**             | `config/settings.py`                                | 集中管理應用程式的設定，例如 API 金鑰、模型名稱等。                          |

## 五、未來可能整合的技術 (根據先前討論)

| 技術/函式庫 | 用途說明                                                               |
| :---------- | :--------------------------------------------------------------------- |
| **Hydra / YAML** | 用於更複雜的實驗設定管理，特別是當 CoT 流程或模型參數需要頻繁調整時。        |
| **MLflow / TensorBoard** | 用於實驗追蹤、結果記錄與比較，尤其在優化 Prompt 或模型時非常有用。       |
| **Docker / Docker Compose** | 用於應用程式的容器化部署，確保環境一致性並簡化部署流程。                 |

---
本文件將隨著專案的發展而更新。 